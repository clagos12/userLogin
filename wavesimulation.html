<!DOCTYPE html>
<html>
<body>
<h1>CRAVE</h1>
<p>Review the case.</p>
<textarea id="comment" name="paragraph_text" cols="50" rows="10"></textarea>
<br/>
<br/>
<button onclick="myFunction2()">Complete Case</button>
<button onclick="myFunction3()">Send to NIGO</button>


<script>
var source;
var comment = document.getElementById("comment");

window.onload = function () {
	  window.addEventListener("message", (event) => {receiveMessage(event);}, false);
   }
   
   

function myFunction2() {
   source.postMessage({action: "complete", comment: comment.value}, "*");
}

function myFunction3() {
   source.postMessage({action: "sendToNigo", comment: comment.value}, "*");
}


// Called sometime after postMessage is called
function receiveMessage(event)
{


	source = event.source;
    console.log("source");
	console.log(source);  
	console.log("origin");
	console.log(event.origin);
	
	if (event.origin !== "https://appian-extensions-1.appianci-dynamic.net")
    return;
}


</script>


</body>
</html>